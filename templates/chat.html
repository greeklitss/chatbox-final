<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js"></script>
    <title>AkoY Me Chat</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
</head>

<body style="background-image: url('{{ url_for('static', filename='akoyme_background.png') }}'); 
             background-size: cover; 
             background-position: center;
             background-attachment: fixed;"> 
    
    <div class="header-tools">
        
        <audio id="audio-stream" src="https://uk24freenew.listen2myradio.com/live.mp3?typeportmount=s1_9254" controls loop preload="auto">
            Your browser does not support the audio element.
        </audio>

        <button id="admin-button" title="Admin Panel" style="display:none;"><i class="fas fa-tools"></i> Admin</button>
        
        <button id="notification-volume-button" title="Notification Sound ON/OFF"><i class="fas fa-bell"></i></button>
    </div>

    <div class="chat-container">
        
        <div class="chat-box" id="chat-messages"> 
            </div>

        <div class="online-users-list" id="online-users-list">
            <h4>Online Users (<span id="online-users-count">0</span>)</h4>
            </div>
    </div>
    
    <div class="message-input-area">
        
        <button id="bold-button" title="Bold [b]"><i class="fas fa-bold"></i></button>
        <button id="italic-button" title="Italic [i]"><i class="fas fa-italic"></i></button>
        <button id="underline-button" title="Underline [u]"><i class="fas fa-underline"></i></button>
        <button id="gif-button" title="GIF/Image Embed"><i class="fas fa-image"></i></button>
        
        <button id="color-picker-button" title="Text Color"><i class="fas fa-palette"></i></button>
        <input type="color" id="color-input" value="#FF0066" style="display: none;">
        
        <button id="emoticon-button" title="Emoticons"><i class="fas fa-smile-wink"></i></button>
        
        <textarea id="message-input" placeholder="Type your message..." rows="1"></textarea>
        
        <button id="send-button" title="Send (Enter)"><i class="fas fa-paper-plane"></i></button>
    </div>
    
    <script src="{{ url_for('static', filename='main.js') }}"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const audio = document.getElementById('audio-stream');
            
            // Ρύθμιση έντασης του Web Radio
            if (audio) {
                audio.volume = 0.3; 
            }
            
            // ΕΛΕΓΧΟΣ ΡΟΛΟΥ ΧΡΗΣΤΗ ΓΙΑ ΤΟ ADMIN BUTTON
            const currentUserRole = "{{ user.role }}"; // Παίρνουμε τον ρόλο από το Flask
            const adminButton = document.getElementById('admin-button');

            if (adminButton && (currentUserRole === 'admin' || currentUserRole === 'owner')) {
                adminButton.style.display = 'inline-block';
                adminButton.addEventListener('click', () => {
                    window.location.href = '/admin';
                });
            }
        });
    </script>
</body>
</html>